::: Exercise

### A competing offer {#sec-a-competing-offer}

A second company also offers you a position. Their **starting salary** is higher—$70,000 on average—but their yearly pay increases are smaller. Employees who have been at the company for 6 years earn, on average, **$18,000 more** than when they started.

We model expected salary after $x$ years as:

$$
E[Y] = \alpha + \beta x.
$$

::::{}

#### Choosing parameters {#sec-choosing-parameters}

* The starting salary gives $\alpha = 70{,}000$.
* The 6-year increase gives $6\beta = 18{,}000$, so $\beta = 3{,}000$.

Assign these values in R:


::: {.cell exercise='ex_1.1.1' envir='Ex1'}
```{webr}
#| exercise: ex_1.1.1
#| envir: Ex1
alpha <- _______
beta <- _______
```
:::


::::: {.solution exercise="ex_1.1.1"}

##### Solution {#sec-choosing-parameters-solution}


::: {.cell exercise='ex_1.1.1' solution='true' envir='Ex1'}
```{webr}
#| exercise: ex_1.1.1
#| solution: true
#| envir: Ex1
alpha <- 70000
beta <- 3000
```
:::


:::::


::: {.cell exercise='ex_1.1.1' check='true' class='wait' envir='Ex1'}
```{webr}
#| exercise: ex_1.1.1
#| check: true
#| class: wait
#| envir: Ex1
gradethis::grade_this_code()
```
:::


::::

---

::::{}

#### Linear prediction {#sec-linear-prediction-2}

Thus the linear predictor for Company B is

$$
E[Y] = 70{,}000 + 3{,}000 \cdot x.
$$

Below is a plot comparing salary trends for both companies:

::: {.panel-tabset}

## Plot {#sec-linear-prediction-plot}


::: {.cell}
::: {.cell-output-display}
![Linear salary trends for two companies.](ch0-lm_files/figure-html/chapter00-lm-linear-prediction-plot-1.png){width=672}
:::
:::


## Code {#sec-linear-prediction-code}


::: {.cell}

```{.r .cell-code}
ggplot() +
  geom_abline(aes(intercept = 7e4, slope = 3e3, colour = "Company B")) +
  geom_abline(aes(intercept = 5e4, slope = 5e3, colour = "Company A")) +
  lims(x = c(0, 15), y = c(4e4, 13e4)) +
  labs(
    x = "Years Employed",
    y = "Expected Salary ($)",
    colour = "Company"
  ) +
  scale_color_manual(values = c("Company B" = "#4CAF50", "Company A" = "#2196F3"))
```
:::


:::

Now compute the expected salary after 10 years:


::: {.cell exercise='ex_1.1.2' envir='Ex1'}
```{webr}
#| exercise: ex_1.1.2
#| envir: Ex1
E_Y <- _____ + (_____ * _____)
```
:::


::::: {.solution exercise="ex_1.1.2"}


::: {.cell exercise='ex_1.1.2' solution='true' envir='Ex1'}
```{webr}
#| exercise: ex_1.1.2
#| solution: true
#| envir: Ex1
E_Y <- alpha + (beta * 10)
```
:::


:::::


::: {.cell exercise='ex_1.1.2' check='true' class='wait' envir='Ex1'}
```{webr}
#| exercise: ex_1.1.2
#| check: true
#| class: wait
#| envir: Ex1
gradethis::grade_this_code()
```
:::


::::

---

::::{}

#### Using R functions {#sec-using-r-functions}

Evaluating the expression in R:


::: {.cell exercise='ex_1.1.2.2' envir='Ex1' edit='false'}
```{webr}
#| exercise: ex_1.1.2.2
#| envir: Ex1
#| edit: false
E_Y
```
:::


This matches the calculation:

$$
E[Y] = 70{,}000 + 3{,}000 \times 10 = 100{,}000.
$$

Now we can turn this into a reusable function:


::: {.cell edit='false'}
```{webr}
#| edit: false
simple_linear_prediction <- function(X, alpha = 7e4, beta = 4e3) {
  alpha + (beta * X)
}
```
:::


Predict salaries for these employment durations:


::: {.cell edit='false'}
```{webr}
#| edit: false
X <- c(9, 4, 5, 2, 6)
```
:::



::: {.cell exercise='ex_1.1.3' envir='Ex1'}
```{webr}
#| exercise: ex_1.1.3
#| envir: Ex1

```
:::


::::: {.solution exercise="ex_1.1.3"}


::: {.cell exercise='ex_1.1.3' solution='true'}
```{webr}
#| exercise: ex_1.1.3
#| solution: true
simple_linear_prediction(X)
```
:::


:::::


::: {.cell exercise='ex_1.1.3' check='true' class='wait'}
```{webr}
#| exercise: ex_1.1.3
#| check: true
#| class: wait
gradethis::grade_this_code()
```
:::


::::

### Good work! {#sec-good-work .unnumbered}

Next we will extend our linear predictor to form a full linear *statistical* model.
:::
